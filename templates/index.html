<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>GrabScreen – Free Online Screen Recorder | Record, Trim, Share | No Login & Signup</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="GrabScreen is a free, fast, and private online screen recorder. Record your screen instantly without installing anything. Save, trim, share, or embed videos in one click." />
  <meta name="keywords" content="grab screen, online screen recorder, free screen capture, desktop recording, screen video, screen recorder online, no install screen recorder" />
  <meta name="robots" content="index, follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="canonical" href="{{ request.url_root }}" />

  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="GrabScreen – Free Online Screen Recorder" />
  <meta property="og:description" content="Capture your screen in seconds. No software required. Fast, free, and private." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="{{ request.url_root }}" />
  <meta property="og:image" content="{{ url_for('static', filename='images/preview.jpg') }}" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="GrabScreen – Free Online Screen Recorder" />
  <meta name="twitter:description" content="Fast, free online screen recording. No downloads. Share & embed your videos easily." />
  <meta name="twitter:image" content="{{ url_for('static', filename='images/preview.jpg') }}" />

  <!-- App Icons -->
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}" sizes="32x32" />
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}" sizes="192x192" />
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='favicon.png') }}" />

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />

  <!-- Custom Styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>

<body>
<main class="card fade-in">

  <!-- Brand logo and name -->
  <div id="logoBrand">
    <img src="{{ url_for('static', filename='logo.png') }}" alt="GrabScreen Logo" />
  </div>

  <!-- Theme toggle -->
  <button id="themeToggle" class="theme-toggle" title="Toggle Theme">
    <i class="fa-solid"></i>
  </button>

  <h1>🖥️ Online Screen Recorder</h1>

  <button id="startBtn" class="btn start">▶ Start Recording</button>
  <button id="stopBtn" class="btn stop" disabled>⏹ Stop Recording</button>

  <p id="statusMsg"></p>
  <video id="preview" controls class="hidden"></video>

  <!-- Share menu -->
  <div id="shareWrap" class="hidden">
    <button id="shareBtn" class="btn share">📤 Share ▼</button>
    <ul id="shareMenu" class="dropdown">
      <li><button id="copySecure">🔒 Secure Link (15 min)</button></li>
      <li><button id="copyLink">🔗 Copy Link</button></li>
      <li><button id="shareEmail">📧 Email</button></li>
      <li><button id="openClip">✂️ Share Clip</button></li>
      <li><button id="openEmbed">💻 Embed Code</button></li>
    </ul>
  </div>

  <!-- Clip panel -->
  <section id="clipPanel" class="panel hidden">
    <h2>✂ Trim Clip</h2>
    <label>Start (s): <input id="clipStart" type="number" min="0" value="0" /></label>
    <label>End (s): <input id="clipEnd" type="number" min="1" value="5" /></label>
    <button id="clipGo" class="btn share">📤 Share Clip</button>
    <button id="clipCancel" class="btn cancel">Cancel</button>
  </section>

  <!-- Embed modal -->
  <dialog id="embedModal">
    <h2>📎 Embed Video</h2>
    <label>Width: <input id="embedWidth" type="text" value="100%" /></label>
    <label>Height: <input id="embedHeight" type="text" value="960" /></label>
    <textarea id="embedCode" readonly></textarea>
    <button id="embedCopy" class="btn share">📋 Copy</button>
    <button id="embedClose" class="btn cancel">Cancel</button>
  </dialog>

  <!-- Email modal -->
  <dialog id="emailModal">
    <h2>📧 Send Recording</h2>
    <label>
      To (email): <input id="emailTo" type="email" placeholder="example@domain.com" required />
    </label>
    <button id="emailSend" class="btn share">📤 Send</button>
    <button id="emailClose" class="btn cancel">Cancel</button>
    <div id="emailStatus" style="margin-top:.75rem;font-size:.9rem;"></div>
  </dialog>

  <!-- Magic Link Session History Controls -->
  <div class="session-controls">
  <button id="resumeBtn"  class="btn hidden">🔄 Resume My Recordings</button>
  <button id="forgetSession" class="btn cancel hidden">🗑️ Forget My Session</button>
</div>

<div id="filesPanel" class="panel hidden"></div>


  <!-- File history list -->
  <div id="filesPanel" class="panel hidden">
    <h2>📝 My Recent Recordings</h2>
    <ul id="filesList"></ul>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <p>© 2025 YourBrand. All rights reserved.</p>
    <p><a href="#">Privacy Policy</a> | <a href="#">Contact</a></p>
  </footer>
</main>

<!-- JavaScript -->
<script src="{{ url_for('static', filename='js/main.js') }}" defer></script>

<script>
  // Theme toggle logic
  const themeToggleBtn = document.getElementById('themeToggle');
  const icon = themeToggleBtn.querySelector('i');
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  const savedTheme = localStorage.getItem('theme');

  const setTheme = theme => {
    document.body.classList.remove('light', 'dark');
    document.body.classList.add(theme);
    icon.className = theme === 'dark' ? 'fa-solid fa-sun' : 'fa-solid fa-moon';
    localStorage.setItem('theme', theme);
  };

  // Init theme
  setTheme(savedTheme || (prefersDark ? 'dark' : 'light'));

  // Toggle theme
  themeToggleBtn.onclick = () => {
    const current = document.body.classList.contains('dark') ? 'dark' : 'light';
    setTheme(current === 'dark' ? 'light' : 'dark');
  };
</script>
</body>
</html>
